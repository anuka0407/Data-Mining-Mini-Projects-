"0","set.seed(395)"
"0","# specify a linear model"
"0","lm_model <- "
"0","  linear_reg() %>% "
"0","  set_engine('lm') %>% "
"0","  set_mode('regression')"
"0","# define a recipe - FEATURE ENG"
"0","lm_recipe <- "
"0","  # fit on all variables"
"0","  recipe(medianHouseValue ~ ., data = housing_train) %>%"
"0","  # log price"
"0","  step_log(medianHouseValue) %>%"
"0","  # standardize"
"0","  step_range(totalBedrooms, totalRooms, population, housingMedianAge, medianIncome) %>%"
"0","  # specify tuning hyperparameters"
"0","  step_ns(longitude, deg_free = tune(""long df"")) %>% "
"0","  step_ns(latitude,  deg_free = tune(""lat df""))"
"0","# grid to tun long/lat"
"0","grid_vals <- seq(2, 22, by = 2)"
"0","# A regular grid:"
"0","spline_grid <- expand.grid(`long df` = grid_vals, `lat df` = grid_vals)"
"0","# which hyper param to tune"
"0","housing_param <- "
"0","  lm_recipe %>% "
"0","  parameters() %>% "
"0","  update("
"0","    `long df` = spline_degree(), "
"0","    `lat df` = spline_degree()"
"0","  )"
"0","housing_param"
"1","Collection of"
"1"," "
"1","2"
"1"," "
"1","parameters for tuning

"
"1",""
"1"," identifier"
"1","     type"
"1","    object"
"1","
"
"1","    long df"
"1"," deg_free"
"1"," nparam[+]"
"1","
"
"1","     lat df"
"1"," deg_free"
"1"," nparam[+]"
"1","
"
"1","
"
"0","# create a workflow"
"0","lm_workflow <- "
"0","  workflow() %>% "
"0","  # specify engine"
"0","  add_model(lm_model) %>% "
"0","  # specify recipe"
"0","  add_recipe(lm_recipe)"
"0","tic()"
"0","lm_res <- "
"0","  lm_workflow %>%"
"0","  tune_grid(resamples = housing_vfold, grid = spline_grid)"
"2","
"
